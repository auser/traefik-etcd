[tasks.watch-backend]
command = "cargo"
args = ["run", "--", "serve", "-l", "debug"]
watch = { watch = ["./src/", "./bin/"] }
workspace = false

[tasks.watch-frontend]
command = "pnpm"
cwd = "./frontend"
args = ["run", "dev", "--host"]
watch = { watch = ["./frontend/"] }
workspace = false

[tasks.install-frontend-deps]
command = "pnpm"
cwd = "./frontend"
args = ["install", "--force"]
workspace = false

[tasks.build-frontend]
command = "pnpm"
cwd = "./frontend"
args = ["run", "build"]
workspace = false

[tasks.prepare-package]
dependencies = ["build-frontend"]

[tasks.package]
command = "cargo"
args = ["package"]
dependencies = ["prepare-package"]

[tasks.dev]
run_task = { name = ["watch-backend", "watch-frontend"], parallel = true }

[tasks.release]
command = "cargo"
args = ["release", "--execute"]
workspace = false
dependencies = ["build-frontend"]
